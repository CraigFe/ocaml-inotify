OASISFormat  : 0.3
Name         : inotify
Version      : 2.0
Synopsis     : Inotify bindings for ocaml
Authors      : Vincent Hanquez, Peter Zotov
License      : LGPL-2.1 with OCaml linking exception
Plugins      : DevFiles (0.3), META (0.3)
BuildTools   : ocamlbuild
BuildDepends : unix
Maintainers  : Peter Zotov <whitequark@whitequark.org>
Description  : Inotify bindings for ocaml
Homepage     : https://github.com/whitequark/ocaml-inotify

Flag lwt
  Description:      Build the Lwt wrapper
  Default:          false

Library "inotify"
  Path:             lib
  Modules:          Inotify
  CSources:         inotify_stubs.c,inotify_stubs.h
  BuildDepends:     bytes
  ByteOpt:          -safe-string
  NativeOpt:        -safe-string

Library "inotify-lwt"
  Build$:           flag(lwt)
  Install$:         flag(lwt)
  FindlibName:      lwt
  FindlibParent:    inotify
  Path:             lib
  Modules:          Lwt_inotify
  BuildDepends:     inotify, lwt, lwt.unix

Executable test_inotify
  Build$:           flag(tests)
  Install:          false
  Path:             lib_test
  MainIs:           test_inotify.ml
  BuildDepends:     oUnit (>= 2.0), fileutils (>= 0.4.4), inotify
  CompiledObject:   best

Test inotify
  Command:          $test_inotify

Executable test_inotify_lwt
  Build$:           flag(tests) && flag(lwt)
  Install:          false
  Path:             lib_test
  MainIs:           test_inotify_lwt.ml
  BuildDepends:     oUnit (>= 2.0), fileutils (>= 0.4.4), inotify.lwt
  CompiledObject:   best

Test inotify_lwt
  Run$:             flag(lwt)
  Command:          $test_inotify_lwt -runner sequential
